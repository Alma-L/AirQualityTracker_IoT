<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test</title>
</head>
<body>
    <h1>Frontend Test</h1>
    <div id="test-results"></div>
    
    <script>
        const API_BASE = "http://localhost:8000/api";
        
        async function testFrontend() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p>Testing frontend connection...</p>';
            
            try {
                // Test 1: Health check
                const health = await fetch(`${API_BASE}/health`);
                const healthData = await health.json();
                results.innerHTML += `<p>âœ… Health: ${healthData.message}</p>`;
                
                // Test 2: Stats
                const stats = await fetch(`${API_BASE}/stats`);
                const statsData = await stats.json();
                results.innerHTML += `<p>âœ… Stats: ${statsData.sensor_count} sensors, ${statsData.total_readings} readings</p>`;
                
                // Test 3: Latest readings
                const latest = await fetch(`${API_BASE}/sensors/latest`);
                const latestData = await latest.json();
                results.innerHTML += `<p>âœ… Latest: ${latestData.length} sensor readings</p>`;
                
                if (latestData.length > 0) {
                    const sensor = latestData[0];
                    results.innerHTML += `
                        <p>ğŸ“Š Sample data:</p>
                        <ul>
                            <li>Sensor: ${sensor.sensor_id}</li>
                            <li>PM2.5: ${sensor.pm2_5}</li>
                            <li>PM10: ${sensor.pm10}</li>
                            <li>Temperature: ${sensor.temperature}Â°C</li>
                            <li>Humidity: ${sensor.humidity}%</li>
                            <li>Timestamp: ${new Date(sensor.timestamp).toLocaleString()}</li>
                        </ul>
                    `;
                }
                
                results.innerHTML += '<p>ğŸ‰ Frontend test completed successfully!</p>';
                results.innerHTML += '<p><a href="http://localhost:8000" target="_blank">Open Main Application</a></p>';
                
            } catch (error) {
                results.innerHTML += `<p>âŒ Error: ${error.message}</p>`;
            }
        }
        
        // Run test when page loads
        testFrontend();
    </script>
</body>
</html>
